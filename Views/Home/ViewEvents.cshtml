@using NSH.Models
@model List<NSH.Models.EventModel>

@{
    ViewBag.Title = "View Events";
}

<link href="~/Content/ViewEvent.css" rel="stylesheet" type="text/css" />
<!-- Add SweetAlert CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

@if (TempData["SuccessMessage"] != null)
{
    <script>
        Swal.fire({
            icon: 'success',
            title: 'Success!',
            text: '@TempData["SuccessMessage"]',
            confirmButtonColor: '#3085d6'
        });
    </script>
}


<div class="event-container">
    <h2>Upcoming Events</h2>

    @if (Model != null && Model.Count > 0)
    {
        foreach (var item in Model)
        {
            <div class="event-card">
                @if (!string.IsNullOrEmpty(item.ImagePath))
                {
                    <img src="@Url.Content(item.ImagePath)" alt="Event Image" class="event-thumbnail" />
                }

                <div class="event-content">
                    <h3>@item.EventTitle</h3>
                    <a href="@Url.Action("EventDetails", "Home", new { id = item.Id })" class="view-more-btn">View More</a>
                </div>
            </div>
        }
    }
    else
    {
        <p>No events available.</p>
    }
</div>

<style>
    .event-card {
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 20px;
        text-align: center;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
    }

    .event-thumbnail {
        width: 100%;
        max-width: 300px;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
    }

    .view-more-btn {
        display: inline-block;
        padding: 8px 12px;
        margin-top: 10px;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 5px;
    }

        .view-more-btn:hover {
            background-color: #0056b3;
        }
</style>



<script>
    // Adjust image sizes dynamically on page load
    window.onload = function () {
        const images = document.querySelectorAll(".event-image");

        images.forEach(function (image) {
            const maxWidth = 300;
            const maxHeight = 200;

            let width = image.naturalWidth;
            let height = image.naturalHeight;

            // Adjust size to fit within the max width and height while maintaining the aspect ratio
            if (width > height) {
                if (width > maxWidth) {
                    height = Math.round((height * maxWidth) / width);
                    width = maxWidth;
                }
            } else {
                if (height > maxHeight) {
                    width = Math.round((width * maxHeight) / height);
                    height = maxHeight;
                }
            }

            image.style.width = width + "px";
            image.style.height = height + "px";
            image.style.objectFit = "cover";  // Ensures the image fills the space
        });
    };
</script>